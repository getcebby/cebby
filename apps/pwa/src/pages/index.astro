---
import Layout from '../layouts/Layout.astro';
import SEO from '../components/SEO.astro';
import { supabase } from '../lib/supabase';
import { Image } from 'astro:assets';
import ContentCard from '../components/ContentCard.astro';

const { data: partners, error } = await supabase
    .from('accounts')
    .select('*')
    .order('name', { ascending: true })
    .limit(20);

if (error) {
    console.error('Error fetching partners:', error);
}

const metaDescription =
    'Discover tech events happening in Cebu through Cebby - your automated event discovery platform. We aggregate and surface the most relevant tech events to help you stay connected with the community.';

const faqs = [
    {
        question: 'How does Cebby find events?',
        answer: "We use automated systems to aggregate events from various sources including community pages, tech groups, and event platforms. Our system checks if there are new events and add them to the platform. Our partners have their own dedicated pages where they'll be able to showcase their events.",
    },
    {
        question: 'Is Cebby free to use?',
        answer: 'Yes, Cebby is completely free! We believe in making tech event discovery accessible to everyone in the community.',
    },
    {
        question: 'What types of events are listed?',
        answer: 'We focus on tech-related events including workshops, conferences, meetups, hackathons, and networking events. All events are automatically collected and verified.',
    },
    {
        question: 'How do I get notified about new events?',
        answer: 'Enable notifications in your browser to get automatic alerts when new events are added. You can also sync events with your calendar for reminders.',
    },
    {
        question: 'I want to support the project, how can I get involved?',
        answer: 'The project is open source and we welcome any type of contributions - be it monetary, code, copy, marketing, etc. Your support can go a long way in helping everyone in Cebu find the events that matter to them. See our public roadmap anytime...',
    },
];

const categories = [
    { name: 'Tech', href: '/category/tech', icon: 'laptop-code' },
    { name: 'Arts', href: '/category/arts', icon: 'palette' },
    { name: 'Fitness', href: '/category/fitness', icon: 'dumbbell' },
    { name: 'Music', href: '/category/music', icon: 'music' },
    { name: 'Food', href: '/category/food', icon: 'utensils' },
    { name: 'Business', href: '/category/business', icon: 'briefcase' },
    { name: 'Education', href: '/category/education', icon: 'graduation-cap' },
    { name: 'Community', href: '/category/community', icon: 'users' },
];

const trendingSearches = ['hackathons', 'yoga classes', 'art workshops', 'live music', 'food festivals', 'networking'];

const sampleContent = [
    {
        title: 'Cebu Tech Week 2024',
        description:
            'The biggest tech conference in Cebu featuring workshops, talks, and networking opportunities with industry leaders.',
        image: 'https://images.unsplash.com/photo-1540575467063-178a50c2df87?ixlib=rb-4.0.3',
        category: 'Tech',
        date: '2024-04-15T09:00:00',
        venue: 'Cebu IT Park',
        author: {
            name: 'Cebu Tech Communities',
            avatar: 'https://i.pravatar.cc/150?img=1',
        },
        likes: 245,
        views: 1200,
    },
    {
        title: 'Sunset Yoga by the Beach',
        description:
            'Join us for a relaxing sunset yoga session with experienced instructors at the beautiful shores of Mactan.',
        image: 'https://images.unsplash.com/photo-1506126613408-eca07ce68773?ixlib=rb-4.0.3',
        category: 'Fitness',
        date: '2024-03-20T16:30:00',
        venue: 'Mactan Newtown Beach',
        author: {
            name: 'Cebu Wellness Club',
            avatar: 'https://i.pravatar.cc/150?img=2',
        },
        likes: 189,
        views: 890,
    },
    {
        title: 'Local Artists Exhibition',
        description:
            "Discover Cebu's emerging artists in this month-long exhibition featuring paintings, sculptures, and installations.",
        image: 'https://images.unsplash.com/photo-1460661419201-fd4cecdf8a8b?ixlib=rb-4.0.3',
        category: 'Arts',
        date: '2024-03-25T10:00:00',
        venue: 'Ayala Center Cebu',
        author: {
            name: 'Cebu Art Association',
            avatar: 'https://i.pravatar.cc/150?img=3',
        },
        likes: 156,
        views: 750,
    },
    {
        title: 'Startup Weekend Cebu',
        description:
            'Turn your ideas into reality in 54 hours! Join entrepreneurs, developers, and designers in this intensive startup event.',
        image: 'https://images.unsplash.com/photo-1515187029135-18ee286d815b?ixlib=rb-4.0.3',
        category: 'Business',
        date: '2024-04-05T18:00:00',
        venue: 'The Company',
        author: {
            name: 'Startup Cebu',
            avatar: 'https://i.pravatar.cc/150?img=4',
        },
        likes: 134,
        views: 620,
    },
    {
        title: 'Cebu Music Festival',
        description: 'A three-day music festival featuring local and international artists across different genres.',
        image: 'https://images.unsplash.com/photo-1459749411175-04bf5292ceea?ixlib=rb-4.0.3',
        category: 'Music',
        date: '2024-05-01T15:00:00',
        venue: 'South Road Properties',
        author: {
            name: 'Cebu Events Co',
            avatar: 'https://i.pravatar.cc/150?img=5',
        },
        likes: 198,
        views: 945,
    },
    {
        title: 'Food Tourism Summit',
        description:
            "Explore Cebu's culinary heritage and future through talks, tastings, and workshops with local chefs.",
        image: 'https://images.unsplash.com/photo-1414235077428-338989a2e8c0?ixlib=rb-4.0.3',
        category: 'Food',
        date: '2024-04-20T09:00:00',
        venue: 'Marco Polo Plaza',
        author: {
            name: 'Cebu Food Society',
            avatar: 'https://i.pravatar.cc/150?img=6',
        },
        likes: 167,
        views: 830,
    },
];
---

<Layout title="Cebby - Discover Events in Cebu">
    <Fragment slot="head">
        <SEO
            title="Discover Events in Cebu - Your Local Event Discovery Platform"
            description="Find and explore the best events happening in Cebu - from tech conferences and art exhibitions to fitness classes and food festivals and many more..."
            image="/og.png"
            type="website"
        />
    </Fragment>

    <main class="min-h-screen">
        <!-- Hero Section with gradient background -->
        <div class="bg-gradient relative overflow-hidden">
            <div class="absolute inset-0 opacity-20 bg-purple-100"></div>
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 relative z-10">
                <div class="text-center">
                    <h1 class="text-4xl md:text-6xl font-bold text-gray-900 mt-4 mb-4">
                        Discover Amazing Events in Cebu
                    </h1>
                    <p class="text-xl text-gray-700 mb-8 max-w-3xl mx-auto">
                        Find and join the best local events - from tech meetups to art shows, fitness classes to food
                        festivals
                    </p>

                    <!-- Search Bar -->
                    <div class="max-w-3xl mx-auto mb-8">
                        <div class="relative">
                            <input
                                type="text"
                                placeholder="What are you looking for?"
                                class="w-full px-6 py-4 text-lg border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-cebby-primary focus:border-cebby-primary shadow-sm"
                            />
                            <button
                                class="absolute right-3 top-1/2 -translate-y-1/2 bg-cebby-primary text-white px-6 py-2 rounded-full hover:bg-cebby-primary-dark transition-colors"
                            >
                                Search
                            </button>
                        </div>
                    </div>

                    <!-- Quick Filters -->
                    <div class="flex flex-wrap justify-center gap-3 mb-8">
                        <button
                            class="px-4 py-2 rounded-full bg-white text-gray-700 border-gray-200 hover:bg-gray-50 transition-colors"
                        >
                            Today
                        </button>
                        <button
                            class="px-4 py-2 rounded-full bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors"
                        >
                            This Weekend
                        </button>
                        <button
                            class="px-4 py-2 rounded-full bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors"
                        >
                            This Month
                        </button>
                        <button
                            class="px-4 py-2 rounded-full bg-white text-gray-700 border border-gray-200 hover:bg-gray-50 transition-colors"
                        >
                            Free Events
                        </button>
                    </div>

                    <!-- Trending Searches -->
                    <div class="flex flex-wrap justify-center gap-2 text-sm text-gray-600">
                        <span class="mr-2">Popular searches:</span>
                        {
                            trendingSearches.map((term) => (
                                <a href={`/search?q=${term}`} class="hover:text-cebby-primary hover:underline">
                                    {term}
                                </a>
                            ))
                        }
                    </div>
                </div>
            </div>
        </div>

        <!-- Categories Navigation - Dribbble Style -->
        <div class="border-t border-b border-gray-200 bg-white sticky top-16 z-20">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <nav class="flex items-center justify-between py-4 overflow-x-auto">
                    <div class="flex space-x-8">
                        {
                            categories.map((category) => {
                                const categoryLower = category.name.toLowerCase();
                                return (
                                    <a
                                        href={category.href}
                                        class="flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 hover:text-cebby-primary relative group"
                                    >
                                        <i
                                            class={`fas fa-${category.icon} text-gray-500 group-hover:text-${categoryLower} transition-colors`}
                                        />
                                        <span class="group-hover:text-cebby-primary transition-colors">
                                            {category.name}
                                        </span>
                                        <div
                                            class={`absolute bottom-0 left-0 w-full h-0.5 bg-${categoryLower} opacity-0 group-hover:opacity-100 transition-opacity`}
                                        />
                                    </a>
                                );
                            })
                        }
                    </div>
                    <button
                        class="bg-gray-100 px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-200 flex items-center gap-2"
                    >
                        <i class="fas fa-sliders-h"></i>
                        Filters
                    </button>
                </nav>
            </div>
        </div>

        <!-- Featured Events Section -->
        <div class="py-16">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-2xl font-bold text-gray-900">Featured Events</h2>
                    <a href="/events" class="text-cebby-primary hover:text-cebby-primary-dark font-medium">
                        View all events
                        <i class="fas fa-arrow-right ml-1 text-xs"></i>
                    </a>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    {sampleContent.slice(0, 3).map((content) => <ContentCard {...content} />)}
                </div>
            </div>
        </div>

        <!-- Upcoming Events Section -->
        <div class="py-16 bg-gray-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-2xl font-bold text-gray-900">Upcoming Events</h2>
                    <a href="/events" class="text-cebby-primary hover:text-cebby-primary-dark font-medium">
                        View all events
                        <i class="fas fa-arrow-right ml-1 text-xs"></i>
                    </a>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    {sampleContent.slice(3, 6).map((content) => <ContentCard {...content} />)}
                </div>
            </div>
        </div>

        <!-- CTA Section -->
        <div class="py-16 bg-cebby-primary-dark">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center text-white">
                    <h2 class="text-3xl font-bold mb-4">Ready to create your own event?</h2>
                    <p class="text-lg mb-8 opacity-90">
                        Share your event with the Cebu community and reach thousands of potential attendees
                    </p>
                    <a
                        href="/submit"
                        class="inline-block bg-white text-cebby-primary px-8 py-3 rounded-full font-medium hover:bg-gray-100 transition-colors"
                    >
                        Submit Your Event
                    </a>
                </div>
            </div>
        </div>
    </main>
</Layout>
