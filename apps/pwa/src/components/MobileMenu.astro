---
const exploreLinks = [
    { name: 'Popular', href: '/popular', icon: 'chart-line' },
    { name: 'New & Noteworthy', href: '/new', icon: 'plus-circle' },
    { name: 'All Events', href: '/events', icon: 'list' },
    { name: 'Submit Event', href: '/submit', icon: 'plus' },
    { name: 'Blog', href: '/blog', icon: 'rss' },
];

const categories = [
    { name: 'Tech', href: '/category/tech', icon: 'laptop-code' },
    { name: 'Arts', href: '/category/arts', icon: 'palette' },
    { name: 'Fitness', href: '/category/fitness', icon: 'dumbbell' },
    { name: 'Music', href: '/category/music', icon: 'music' },
    { name: 'Food', href: '/category/food', icon: 'utensils' },
    { name: 'Business', href: '/category/business', icon: 'briefcase' },
    { name: 'Education', href: '/category/education', icon: 'graduation-cap' },
    { name: 'Community', href: '/category/community', icon: 'users' },
];

const companyLinks = [
    { name: 'About', href: '/about', icon: 'info-circle' },
    { name: 'Careers', href: '/careers', icon: 'briefcase' },
    { name: 'Contact', href: '/contact', icon: 'envelope' },
    { name: 'Advertise', href: '/advertise', icon: 'ad' },
    { name: 'FAQ', href: '/faq', icon: 'question-circle' },
];

const resourceLinks = [
    { name: 'Help Center', href: '/help', icon: 'life-ring' },
    { name: 'Community Guidelines', href: '/guidelines', icon: 'users-cog' },
    { name: 'Privacy Policy', href: '/privacy', icon: 'shield-alt' },
    { name: 'Terms of Service', href: '/terms', icon: 'file-contract' },
    { name: 'Cookies', href: '/cookies', icon: 'cookie-bite' },
];

const currentPath = new URL(Astro.request.url).pathname;
---

<div
    id="mobile-menu"
    class="fixed inset-0 z-50 bg-white transform translate-x-full transition-transform duration-300 ease-in-out"
>
    <div class="h-full overflow-y-auto pb-safe">
        <!-- Header -->
        <div class="flex items-center justify-between p-4 border-b border-gray-200">
            <a href="/" class="flex items-center">
                <img src="/logo.svg" alt="Cebby" class="h-8" />
            </a>
            <button id="close-menu" class="p-2 rounded-full hover:bg-gray-100">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-6 w-6"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                >
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"
                    ></path>
                </svg>
            </button>
        </div>

        <!-- User Profile -->
        <div class="p-4 border-b border-gray-200">
            <div class="flex items-center">
                <img src="https://i.pravatar.cc/150?img=1" alt="Profile" class="w-12 h-12 rounded-full mr-4" />
                <div>
                    <p class="font-medium text-gray-900">John Doe</p>
                    <p class="text-sm text-gray-500">john@example.com</p>
                </div>
            </div>
            <div class="mt-4 flex space-x-3">
                <a
                    href="/profile"
                    class="flex-1 py-2 px-4 text-center text-sm font-medium text-cebby-primary border border-cebby-primary rounded-md hover:bg-cebby-primary hover:text-white transition-colors"
                >
                    View Profile
                </a>
                <a
                    href="/settings"
                    class="flex-1 py-2 px-4 text-center text-sm font-medium text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors"
                >
                    Settings
                </a>
            </div>
        </div>

        <!-- Navigation Sections -->
        <div class="p-4 space-y-6">
            <!-- Explore Section -->
            <div>
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Explore</h3>
                <ul class="space-y-2">
                    {
                        exploreLinks.map((link) => (
                            <li>
                                <a
                                    href={link.href}
                                    class:list={[
                                        'flex items-center px-3 py-2 text-base font-medium rounded-md',
                                        currentPath === link.href
                                            ? 'bg-cebby-primary/10 text-cebby-primary'
                                            : 'text-gray-700 hover:bg-gray-50 hover:text-cebby-primary',
                                    ]}
                                >
                                    <i class={`fas fa-${link.icon} w-5 h-5 mr-3`} />
                                    <span>{link.name}</span>
                                </a>
                            </li>
                        ))
                    }
                </ul>
            </div>

            <!-- Categories Section -->
            <div>
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Categories</h3>
                <ul class="space-y-2">
                    {
                        categories.map((category) => {
                            const categoryLower = category.name.toLowerCase();
                            return (
                                <li>
                                    <a
                                        href={category.href}
                                        class:list={[
                                            'flex items-center px-3 py-2 text-base font-medium rounded-md',
                                            currentPath === category.href
                                                ? `bg-${categoryLower}-light text-${categoryLower}`
                                                : 'text-gray-700 hover:bg-gray-50 hover:text-cebby-primary',
                                        ]}
                                    >
                                        <i class={`fas fa-${category.icon} w-5 h-5 mr-3`} />
                                        <span>{category.name}</span>
                                    </a>
                                </li>
                            );
                        })
                    }
                </ul>
            </div>

            <!-- Company Section -->
            <div>
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Company</h3>
                <ul class="space-y-2">
                    {
                        companyLinks.map((link) => (
                            <li>
                                <a
                                    href={link.href}
                                    class:list={[
                                        'flex items-center px-3 py-2 text-base font-medium rounded-md',
                                        currentPath === link.href
                                            ? 'bg-cebby-primary/10 text-cebby-primary'
                                            : 'text-gray-700 hover:bg-gray-50 hover:text-cebby-primary',
                                    ]}
                                >
                                    <i class={`fas fa-${link.icon} w-5 h-5 mr-3`} />
                                    <span>{link.name}</span>
                                </a>
                            </li>
                        ))
                    }
                </ul>
            </div>

            <!-- Resources Section -->
            <div>
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Resources</h3>
                <ul class="space-y-2">
                    {
                        resourceLinks.map((link) => (
                            <li>
                                <a
                                    href={link.href}
                                    class:list={[
                                        'flex items-center px-3 py-2 text-base font-medium rounded-md',
                                        currentPath === link.href
                                            ? 'bg-cebby-primary/10 text-cebby-primary'
                                            : 'text-gray-700 hover:bg-gray-50 hover:text-cebby-primary',
                                    ]}
                                >
                                    <i class={`fas fa-${link.icon} w-5 h-5 mr-3`} />
                                    <span>{link.name}</span>
                                </a>
                            </li>
                        ))
                    }
                </ul>
            </div>
        </div>

        <!-- Sign Out -->
        <div class="p-4 border-t border-gray-200 mt-6">
            <a
                href="/logout"
                class="flex items-center px-3 py-2 text-base font-medium text-red-600 hover:bg-red-50 rounded-md"
            >
                <i class="fas fa-sign-out-alt w-5 h-5 mr-3"></i>
                <span>Sign Out</span>
            </a>
        </div>
    </div>
</div>

<script>
    // Mobile menu toggle
    const mobileMenuButton = document.querySelector('.md\\:hidden button');
    const mobileMenu = document.getElementById('mobile-menu');
    const closeMenuButton = document.getElementById('close-menu');

    if (mobileMenuButton && mobileMenu && closeMenuButton) {
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.remove('translate-x-full');
            document.body.style.overflow = 'hidden';
        });

        closeMenuButton.addEventListener('click', () => {
            mobileMenu.classList.add('translate-x-full');
            document.body.style.overflow = '';
        });
    }
</script>

